â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPLETE IP ALLOCATION SCHEME                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ WIREGUARD VPN NETWORK (10.99.0.0/16)                            â”‚
â”‚   10.99.0.0/24     - Infrastructure                             â”‚
â”‚     10.99.0.1      - Oracle K3s Master (VPN server)             â”‚
â”‚   10.99.1.0/24     - Homelab Users                              â”‚
â”‚     10.99.1.10-254 - Developer laptops/workstations             â”‚
â”‚   10.99.2.0/24     - Break-glass Emergency Access               â”‚
â”‚     10.99.2.10-20  - Emergency admin access                     â”‚
â”‚   10.99.10.0/24    - Site-to-Site                               â”‚
â”‚     10.99.10.1     - MikroTik Router (homelab gateway)          â”‚
â”‚                                                                 â”‚
â”‚ ORACLE CLOUD PRODUCTION (10.0.0.0/16)                           â”‚
â”‚   10.0.1.0/24      - K3s Control Plane                          â”‚
â”‚     10.0.1.10      - K3s Master VM (+ WireGuard server)         â”‚
â”‚   10.0.2.0/24      - K3s Workers                                â”‚
â”‚     10.0.2.11      - K3s Worker 1                               â”‚
â”‚     10.0.2.12      - K3s Worker 2                               â”‚
â”‚   10.0.10.0/24     - Container Registry (optional)              â”‚
â”‚     10.0.10.10     - Harbor registry or OCIR                    â”‚
â”‚                                                                 â”‚
â”‚ ORACLE K3S POD/SERVICE NETWORKS                                 â”‚
â”‚   10.44.0.0/16     - Pod network (ClusterIP)                    â”‚
â”‚   10.45.0.0/16     - Service network (ClusterIP)                â”‚
â”‚                                                                 â”‚
â”‚ HOMELAB PHYSICAL NETWORKS (192.168.0.0/16)                      â”‚
â”‚   192.168.88.0/24  - Home WiFi/Ethernet (VLAN88)                â”‚
â”‚     192.168.88.1   - MikroTik gateway                           â”‚
â”‚   192.168.99.0/24  - HomeAssistant/IoT (VLAN99)                 â”‚
â”‚     192.168.99.1   - MikroTik gateway                           â”‚
â”‚   192.168.77.0/24  - K3s Cluster (VLAN77)                       â”‚
â”‚     192.168.77.1   - MikroTik gateway                           â”‚
â”‚     192.168.77.11  - blade001 (Compute Blade CM5)               â”‚
â”‚     192.168.77.12  - blade002 (Compute Blade CM5)               â”‚
â”‚     192.168.77.13  - blade003 (Compute Blade CM5)               â”‚
â”‚     192.168.77.14  - blade004 (Compute Blade CM5)               â”‚
â”‚     192.168.77.15  - blade005 (Compute Blade CM5, master)       â”‚
â”‚   192.168.100.0/24 - Management VLAN (VLAN100)                  â”‚
â”‚     192.168.100.1  - MikroTik (admin access)                    â”‚
â”‚     192.168.100.10 - Mac Mini (admin workstation)               â”‚
â”‚                                                                 â”‚
â”‚ HOMELAB K3S POD/SERVICE NETWORKS                                â”‚
â”‚   10.42.0.0/16     - Pod network                                â”‚
â”‚   10.43.0.0/16     - Service network                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY DESIGN PRINCIPLES:
  â€¢ No IP overlap between any networks
  â€¢ Oracle uses 10.0.x.x, Homelab uses 192.168.x.x
  â€¢ VPN uses 10.99.x.x for clear separation
  â€¢ Different pod networks per cluster (10.42 vs 10.44)
```

## Complete Network Topology
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          INTERNET                                        â”‚
â”‚                             â”‚                                            â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚              â”‚                              â”‚                            â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚      â”‚ Home ISP        â”‚          â”‚ Oracle Cloud     â”‚                  â”‚
â”‚      â”‚ (Dynamic IP)    â”‚          â”‚ (Static IP)      â”‚                  â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ 203.0.113.10     â”‚                  â”‚
â”‚              â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚              â”‚                             â”‚                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                            â”‚
â”‚   â”‚ MIKROTIK CHATEAU LTE18 â”‚               â”‚                            â”‚
â”‚   â”‚ Homelab Router         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚   â”‚ VLANs + Firewall       â”‚    WireGuard VPN                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    (UDP 51820)                             â”‚
â”‚              â”‚                                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚    â”‚         â”‚          â”‚          â”‚          â”‚                         â”‚
â”‚ â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”                    â”‚
â”‚ â”‚VLAN88â”‚ â”‚VLAN99â”‚  â”‚VLAN77â”‚  â”‚VLAN100 â”‚ â”‚  eth3  â”‚                    â”‚
â”‚ â”‚ Home â”‚ â”‚ IoT  â”‚  â”‚ K3s  â”‚  â”‚  Mgmt  â”‚ â”‚blade005â”‚                    â”‚
â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚    â”‚        â”‚         â”‚          â”‚                                      â”‚
â”‚  WiFi    WiFi      Zyxel      Mac Mini                                  â”‚
â”‚  Switch  Devices   5-port      (Admin)                                  â”‚
â”‚   â”‚        â”‚       PoE Sw                                               â”‚
â”‚   â”‚        â”‚         â”‚                                                  â”‚
â”‚  PCs     HA      blade001-004                                           â”‚
â”‚ Phones   Smart    (CM5 Cluster)                                         â”‚
â”‚          Home                                                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”‚
                              â”‚ WireGuard VPN Tunnel
                              â”‚ (Encrypted, 10.99.0.0/16)
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORACLE CLOUD VCN (10.0.0.0/16)                        â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PUBLIC SUBNET (10.0.1.0/24)                                        â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ K3s Master VM (ARM 4 OCPU, 12GB RAM)                     â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Private IP: 10.0.1.10                                    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Public IP: 203.0.113.10                                  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ VPN IP: 10.99.0.1                                        â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Services:                                                â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   â€¢ K3s Control Plane (6443)                            â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   â€¢ WireGuard Server (51820/udp) â—„â”€â”€â”€ PUBLIC            â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   â€¢ etcd                                                â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PRIVATE SUBNET (10.0.2.0/24)                                       â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ K3s Worker 1            â”‚  â”‚ K3s Worker 2            â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ ARM 6 OCPU, 9GB RAM     â”‚  â”‚ ARM 6 OCPU, 9GB RAM     â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ Private: 10.0.2.11      â”‚  â”‚ Private: 10.0.2.12      â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ (No public IP)          â”‚  â”‚ (No public IP)          â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PRIVATE SUBNET (10.0.10.0/24) - Optional                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚  â”‚
â”‚  â”‚  â”‚ Container Registry      â”‚                                      â”‚  â”‚
â”‚  â”‚  â”‚ 10.0.10.10              â”‚                                      â”‚  â”‚
â”‚  â”‚  â”‚ (Harbor or OCIR)        â”‚                                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  Oracle Free Tier: 4 ARM OCPU total, 24GB RAM total                     â”‚
â”‚  VM Split (3-node):                                                      â”‚
â”‚    Master/Hub:  A1.Flex 1 OCPU, 6 GB RAM, 50 GB storage                 â”‚
â”‚    Worker-1:    A1.Flex 1 OCPU, 6 GB RAM, 50 GB storage                 â”‚
â”‚    Worker-2:    A1.Flex 2 OCPU, 12 GB RAM, 100 GB storage               â”‚
â”‚  Total: 4 OCPU, 24 GB RAM, 200 GB storage âœ… Fits Always Free           â”‚
â”‚                                                                          â”‚
â”‚  Note: A1.Flex OCPU increments are integers (1, 2, 3, 4)                â”‚
â”‚        1.5 OCPU splits are NOT available in Oracle Cloud                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## WireGuard VPN Hub-and-Spoke Topology
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WIREGUARD VPN ARCHITECTURE (Hub-and-Spoke)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  WIREGUARD HUB          â”‚
                    â”‚  Oracle K3s Master VM   â”‚
                    â”‚                         â”‚
                    â”‚  Public: 203.0.113.10   â”‚
                    â”‚  Private: 10.0.1.10     â”‚
                    â”‚  VPN: 10.99.0.1         â”‚
                    â”‚  Port: 51820/udp        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ All peers connect here
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ SPOKE 1  â”‚          â”‚  SPOKE 2   â”‚         â”‚  SPOKE 3   â”‚
    â”‚ MikroTik â”‚          â”‚ Developer  â”‚         â”‚ Break-Glassâ”‚
    â”‚          â”‚          â”‚  Laptop    â”‚         â”‚  Emergency â”‚
    â”‚10.99.10.1â”‚          â”‚ 10.99.1.10 â”‚         â”‚ 10.99.2.10 â”‚
    â”‚          â”‚          â”‚            â”‚         â”‚            â”‚
    â”‚Site-2-Site         â”‚Remote Accessâ”‚         â”‚Emergency   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Routes entire homelab
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   HOMELAB NETWORKS            â”‚
    â”‚   192.168.77.0/24 (K3s)       â”‚
    â”‚   192.168.88.0/24 (Home)      â”‚
    â”‚   192.168.99.0/24 (IoT)       â”‚
    â”‚   192.168.100.0/24 (Mgmt)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PEER CONFIGURATIONS:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HUB: Oracle K3s Master (10.99.0.1)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Interface]                                                 â”‚
â”‚ Address = 10.99.0.1/16                                      â”‚
â”‚ ListenPort = 51820                                          â”‚
â”‚ PrivateKey = <oracle-private-key>                          â”‚
â”‚                                                             â”‚
â”‚ [Peer] # MikroTik Site-to-Site                             â”‚
â”‚ PublicKey = <mikrotik-public-key>                          â”‚
â”‚ AllowedIPs = 10.99.10.1/32, 192.168.77.0/24,               â”‚
â”‚              192.168.88.0/24, 192.168.99.0/24,              â”‚
â”‚              192.168.100.0/24                               â”‚
â”‚ # No Endpoint - MikroTik initiates                         â”‚
â”‚                                                             â”‚
â”‚ [Peer] # Developer 1                                       â”‚
â”‚ PublicKey = <dev1-public-key>                              â”‚
â”‚ AllowedIPs = 10.99.1.10/32                                 â”‚
â”‚                                                             â”‚
â”‚ [Peer] # Break-Glass Admin                                 â”‚
â”‚ PublicKey = <admin-public-key>                             â”‚
â”‚ AllowedIPs = 10.99.2.10/32                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPOKE: MikroTik Router (10.99.10.1)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Interface]                                                 â”‚
â”‚ Address = 10.99.10.1/24                                     â”‚
â”‚ PrivateKey = <mikrotik-private-key>                        â”‚
â”‚                                                             â”‚
â”‚ [Peer] # Oracle Hub                                        â”‚
â”‚ PublicKey = <oracle-public-key>                            â”‚
â”‚ Endpoint = 203.0.113.10:51820                              â”‚
â”‚ AllowedIPs = 10.0.0.0/16, 10.99.0.0/16                     â”‚
â”‚ PersistentKeepalive = 25                                   â”‚
â”‚                                                             â”‚
â”‚ # Routes homelab subnets through VPN                       â”‚
â”‚ PostUp = ip route add 10.0.0.0/16 via 10.99.0.1            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPOKE: Developer Laptop (10.99.1.10)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Interface]                                                 â”‚
â”‚ Address = 10.99.1.10/32                                     â”‚
â”‚ PrivateKey = <dev-private-key>                             â”‚
â”‚ DNS = 1.1.1.1                                               â”‚
â”‚                                                             â”‚
â”‚ [Peer] # Oracle Hub                                        â”‚
â”‚ PublicKey = <oracle-public-key>                            â”‚
â”‚ Endpoint = 203.0.113.10:51820                              â”‚
â”‚ AllowedIPs = 10.0.1.10/32,        # Oracle K3s API         â”‚
â”‚              192.168.77.0/24,      # Homelab K3s           â”‚
â”‚              192.168.88.0/24       # Homelab services      â”‚
â”‚ PersistentKeepalive = 25                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SPOKE: Break-Glass Emergency (10.99.2.10)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Interface]                                                 â”‚
â”‚ Address = 10.99.2.10/32                                     â”‚
â”‚ PrivateKey = <emergency-private-key>                       â”‚
â”‚                                                             â”‚
â”‚ [Peer] # Oracle Hub                                        â”‚
â”‚ PublicKey = <oracle-public-key>                            â”‚
â”‚ Endpoint = 203.0.113.10:51820                              â”‚
â”‚ AllowedIPs = 0.0.0.0/0            # FULL ACCESS            â”‚
â”‚ PersistentKeepalive = 25                                   â”‚
â”‚                                                             â”‚
â”‚ # Emergency access to EVERYTHING                           â”‚
â”‚ # Activate manually, revoke after use                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Homelab Physical Network
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MIKROTIK CHATEAU LTE18 - PHYSICAL PORT LAYOUT                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Port Assignments:
  eth1 (1Gbps)   â†’ VLAN100 Management â†’ Mac Mini
  eth2 (1Gbps)   â†’ VLAN77 K3s â†’ Zyxel PoE Switch â†’ blade001-004
  eth3 (1Gbps)   â†’ VLAN77 K3s â†’ blade005 (direct)
  eth4 (1Gbps)   â†’ VLAN99 IoT/HA â†’ HomeAssistant devices
  eth5 (2.5Gbps) â†’ VLAN88 Home â†’ Gigabit switch â†’ Home devices
  
  wlan1 (2.4GHz) â†’ "Home-WiFi" (VLAN88) + "IoT-WiFi" (VLAN99)
  wlan2 (5GHz)   â†’ "Home-WiFi-5G" (VLAN88) + "IoT-WiFi-5G" (VLAN99)
  
  lte1           â†’ Cellular WAN (failover)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VLAN SEGMENTATION & FIREWALL RULES                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VLAN88 (Home Network - 192.168.88.0/24)
  â”œâ”€ Devices: Laptops, phones, PCs, TVs
  â”œâ”€ Access: Internet (full), K3s services (limited)
  â””â”€ Firewall: Can access VLAN77:80,443 | Block VLAN99,100

VLAN99 (IoT/HomeAssistant - 192.168.99.0/24)
  â”œâ”€ Devices: Smart home, sensors, HomeAssistant
  â”œâ”€ Access: Internet only, isolated from other VLANs
  â””â”€ Firewall: Block all other VLANs | Internet only

VLAN77 (K3s Cluster - 192.168.77.0/24)
  â”œâ”€ Devices: 5x Compute Blade CM5
  â”œâ”€ Access: Internet, VPN to Oracle, limited to VLAN88
  â””â”€ Firewall: Allow VPN | Block VLAN88â†’77 except specific ports

VLAN100 (Management - 192.168.100.0/24)
  â”œâ”€ Devices: Mac Mini admin workstation
  â”œâ”€ Access: ALL VLANs (admin access), VPN break-glass
  â””â”€ Firewall: Can access everything | Nothing can access it


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ K3S CLUSTER PHYSICAL LAYOUT                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                  MikroTik eth2 & eth3
                  (VLAN77 - 192.168.77.0/24)
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Zyxel        â”‚          â”‚ blade005    â”‚
    â”‚ GS1200-5HPV2 â”‚          â”‚ (Master)    â”‚
    â”‚ 60W PoE+     â”‚          â”‚ .77.15      â”‚
    â”‚              â”‚          â”‚ Direct link â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       â”‚        â”‚        â”‚        â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”
â”‚blade1â”‚ â”‚blade2â”‚ â”‚blade3â”‚ â”‚blade4â”‚
â”‚ 001  â”‚ â”‚ 002  â”‚ â”‚ 003  â”‚ â”‚ 004  â”‚
â”‚.77.11â”‚ â”‚.77.12â”‚ â”‚.77.13â”‚ â”‚.77.14â”‚
â”‚Workerâ”‚ â”‚Workerâ”‚ â”‚Workerâ”‚ â”‚Workerâ”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜

Each Compute Blade:
  â€¢ Raspberry Pi CM5 (Cortex-A76 quad-core @ 2.4GHz)
  â€¢ 4GB or 8GB RAM
  â€¢ NVMe SSD (M.2 2230/2242/2260/2280)
  â€¢ Powered via PoE+ (802.3at, up to 30W)
  â€¢ Actual power: 4-7W typical, up to 10W with NVMe
  â€¢ Gigabit Ethernet
  â€¢ Total cluster: 28-40W under load
```

## Access Control Matrix
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WHO CAN ACCESS WHAT                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ HOME DEVICES (VLAN88)                                                â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Internet (full)                                                â”‚
â”‚     âœ“ K3s services on VLAN77 ports 80,443 (HTTP/HTTPS)             â”‚
â”‚   Cannot access:                                                     â”‚
â”‚     âœ— K3s nodes directly (SSH, kubectl)                             â”‚
â”‚     âœ— IoT VLAN (VLAN99)                                             â”‚
â”‚     âœ— Management VLAN (VLAN100)                                     â”‚
â”‚     âœ— Oracle Cloud (no VPN access)                                  â”‚
â”‚                                                                      â”‚
â”‚ IOT DEVICES (VLAN99)                                                 â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Internet only                                                  â”‚
â”‚   Cannot access:                                                     â”‚
â”‚     âœ— Any other VLAN (fully isolated)                               â”‚
â”‚                                                                      â”‚
â”‚ K3S CLUSTER (VLAN77)                                                 â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Internet (pull images, updates)                               â”‚
â”‚     âœ“ Oracle Cloud K3s (via VPN)                                    â”‚
â”‚     âœ“ Container registry                                            â”‚
â”‚   Cannot access:                                                     â”‚
â”‚     âœ— Home VLAN (except responses)                                  â”‚
â”‚     âœ— IoT VLAN                                                      â”‚
â”‚     âœ— Management VLAN                                               â”‚
â”‚                                                                      â”‚
â”‚ MANAGEMENT VLAN (VLAN100)                                            â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Everything (admin access)                                     â”‚
â”‚     âœ“ All VLANs                                                     â”‚
â”‚     âœ“ Router management                                             â”‚
â”‚     âœ“ Via VPN: Oracle Cloud (break-glass)                           â”‚
â”‚                                                                      â”‚
â”‚ DEVELOPERS (VPN 10.99.1.0/24)                                        â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Oracle K3s API (kubectl)                                      â”‚
â”‚     âœ“ Homelab K3s API (via VPN â†’ MikroTik â†’ VLAN77)                â”‚
â”‚     âœ“ Gitea (if exposed)                                            â”‚
â”‚     âœ“ ArgoCD dashboards                                             â”‚
â”‚   Cannot access:                                                     â”‚
â”‚     âœ— SSH to nodes (firewall blocked)                               â”‚
â”‚     âœ— Home network (VLAN88)                                         â”‚
â”‚     âœ— Management VLAN                                               â”‚
â”‚                                                                      â”‚
â”‚ BREAK-GLASS ADMIN (VPN 10.99.2.0/24)                                â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ EVERYTHING (emergency only)                                   â”‚
â”‚     âœ“ SSH to all nodes                                              â”‚
â”‚     âœ“ kubectl to all clusters                                       â”‚
â”‚     âœ“ All homelab VLANs                                             â”‚
â”‚     âœ“ Router management                                             â”‚
â”‚   Restrictions:                                                      â”‚
â”‚     âš ï¸  Manually activated (add peer to WireGuard)                  â”‚
â”‚     âš ï¸  Time-limited (revoke after use)                             â”‚
â”‚     âš ï¸  Fully audited (all actions logged)                          â”‚
â”‚                                                                      â”‚
â”‚ ARGOCD (192.168.77.x)                                                â”‚
â”‚   Can access:                                                        â”‚
â”‚     âœ“ Homelab K3s API (in-cluster)                                  â”‚
â”‚     âœ“ Oracle K3s API (via VPN)                                      â”‚
â”‚     âœ“ Gitea (for GitOps pulls)                                      â”‚
â”‚   Uses:                                                              â”‚
â”‚     âœ“ ServiceAccount tokens (RBAC limited)                          â”‚
â”‚     âœ“ Cannot create/modify RBAC, nodes, CRDs                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Examples
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXAMPLE 1: Developer Deploys to Oracle Cloud                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Developer pushes code to Gitea (homelab)
   Developer Laptop â†’ Gitea (192.168.77.x or via domain)

2. Gitea webhook triggers (if exposed via Cloudflare Tunnel)
   OR ArgoCD polls every 3 minutes

3. ArgoCD (homelab) detects change
   ArgoCD (192.168.77.x) â†’ Git pull from Gitea

4. ArgoCD syncs to Oracle cluster
   ArgoCD â†’ MikroTik (10.99.10.1) â†’
   VPN tunnel â†’ Oracle (10.99.0.1) â†’
   K3s API (10.0.1.10:6443)

5. Oracle K3s applies manifests
   K3s Master â†’ Workers â†’ Pull images â†’ Deploy pods

Flow: Homelab â†’ VPN â†’ Oracle
Encryption: End-to-end via WireGuard


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXAMPLE 2: Developer Accesses Oracle K3s                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Developer connects to WireGuard VPN
   Laptop â†’ Oracle (203.0.113.10:51820)
   Gets VPN IP: 10.99.1.10

2. Developer runs kubectl
   kubectl get pods â†’ 10.0.1.10:6443

3. Oracle firewall checks source
   Source: 10.99.1.10 âœ“ (allowed)
   Destination: 10.0.1.10:6443 âœ“ (K3s API)

4. K3s RBAC checks token
   ServiceAccount permissions validated
   Operation allowed/denied based on role

Flow: Laptop â†’ VPN â†’ Oracle K3s API
Security: WireGuard encryption + K8s RBAC


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXAMPLE 3: Oracle K3s Pulls Image from Homelab Registry         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario: Harbor running on homelab K3s

1. Oracle K3s tries to pull image
   imagePullPolicy triggers on Worker (10.0.2.11)

2. Worker tries to reach registry
   10.0.2.11 â†’ 192.168.77.x:5000 (Harbor)

3. Traffic routes through VPN
   Oracle Worker â†’ Oracle Master (10.0.1.10) â†’
   VPN (10.99.0.1 â†’ 10.99.10.1) â†’ MikroTik â†’
   VLAN77 â†’ Harbor

4. Harbor authenticates & serves image
   Registry â†’ reverse path â†’ Oracle Worker

5. Worker starts container
   Image cached locally for future use

Flow: Oracle â†’ VPN â†’ MikroTik â†’ Homelab
Alternative: Use OCIR (Oracle Container Registry) to avoid this


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXAMPLE 4: Emergency Break-Glass Access                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario: Production Oracle cluster is down, normal access fails

1. Admin generates emergency WireGuard keys
   wg genkey â†’ emergency-private.key
   wg pubkey â†’ emergency-public.key

2. Admin adds peer via Oracle Console SSH
   Login to Oracle Console â†’ SSH to Master VM
   Add [Peer] with emergency-public.key
   AllowedIPs = 10.99.2.10/32
   wg-quick restart

3. Admin connects with emergency config
   Laptop â†’ Oracle VPN (10.99.2.10)

4. Admin has full access
   ssh ubuntu@10.0.1.10 âœ“
   ssh ubuntu@10.0.2.11 âœ“
   kubectl --all-namespaces âœ“
   Can fix the issue

5. After incident resolved
   Remove [Peer] from WireGuard config
   Document incident
   Review what went wrong

Flow: Direct emergency access bypassing normal controls
Audit: All actions logged in multiple places
```

## Security Boundaries
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEFENSE IN DEPTH - 8 LAYERS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ LAYER 1: Network Perimeter                                      â”‚
â”‚   â€¢ Oracle Security Lists: Only UDP 51820 allowed               â”‚
â”‚   â€¢ MikroTik Firewall: VLAN isolation, inter-VLAN rules        â”‚
â”‚   â€¢ No direct SSH/K3s API exposure to internet                 â”‚
â”‚                                                                  â”‚
â”‚ LAYER 2: VPN Authentication                                     â”‚
â”‚   â€¢ WireGuard public key cryptography                           â”‚
â”‚   â€¢ Separate keypairs per peer (never reuse)                   â”‚
â”‚   â€¢ Optional PreSharedKey for post-quantum protection           â”‚
â”‚                                                                  â”‚
â”‚ LAYER 3: VPN Authorization (AllowedIPs)                         â”‚
â”‚   â€¢ MikroTik: Only homelab subnets                              â”‚
â”‚   â€¢ Users: Only specific required resources                     â”‚
â”‚   â€¢ Break-glass: Full access (time-limited)                     â”‚
â”‚                                                                  â”‚
â”‚ LAYER 4: Host Firewall (iptables)                               â”‚
â”‚   â€¢ Oracle: Whitelist VPN sources only                          â”‚
â”‚   â€¢ Homelab: Rate limiting, connection tracking                 â”‚
â”‚   â€¢ Drop-by-default policies                                    â”‚
â”‚                                                                  â”‚
â”‚ LAYER 5: Kubernetes RBAC                                        â”‚
â”‚   â€¢ ArgoCD: Limited ServiceAccount (namespace-scoped)           â”‚
â”‚   â€¢ Developers: Read-only or specific namespace access          â”‚
â”‚   â€¢ Break-glass: cluster-admin (audited)                        â”‚
â”‚                                                                  â”‚
â”‚ LAYER 6: Network Policies                                       â”‚
â”‚   â€¢ Default deny all pod-to-pod traffic                         â”‚
â”‚   â€¢ Explicit allow rules per service                            â”‚
â”‚   â€¢ Deny egress except DNS, registry, external APIs            â”‚
â”‚                                                                  â”‚
â”‚ LAYER 7: Pod Security Standards                                 â”‚
â”‚   â€¢ Enforce "restricted" profile                                â”‚
â”‚   â€¢ No privileged containers                                    â”‚
â”‚   â€¢ Read-only root filesystems                                  â”‚
â”‚   â€¢ Drop all capabilities except required                       â”‚
â”‚                                                                  â”‚
â”‚ LAYER 8: Audit & Monitoring                                     â”‚
â”‚   â€¢ K3s API audit logs (all kubectl commands)                   â”‚
â”‚   â€¢ Oracle VCN Flow Logs (network traffic)                      â”‚
â”‚   â€¢ WireGuard connection logs                                   â”‚
â”‚   â€¢ Prometheus/Grafana/Loki (metrics & logs)                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Design Decisions Summary
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ARCHITECTURE DECISIONS & RATIONALE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ âœ“ Oracle as VPN Hub (not homelab)                               â”‚
â”‚   Why: Stable public IP, better uptime, simpler NAT traversal   â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Hub-and-Spoke VPN (not full mesh)                             â”‚
â”‚   Why: Simpler management, clearer routing, less peer config    â”‚
â”‚                                                                  â”‚
â”‚ âœ“ MikroTik site-to-site (not individual peers per device)       â”‚
â”‚   Why: Centralized homelab access, one VPN tunnel for all       â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Single ArgoCD on homelab (not Oracle)                         â”‚
â”‚   Why: GitOps source of truth stays on-prem, controls both      â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Pull-based GitOps (not push)                                  â”‚
â”‚   Why: Better security, no credentials in CI, K8s-native        â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Separate break-glass network (10.99.2.0/24)                   â”‚
â”‚   Why: Clear separation, easy to audit, time-limited            â”‚
â”‚                                                                  â”‚
â”‚ âœ“ VLAN segmentation on homelab                                  â”‚
â”‚   Why: Isolate IoT, protect management, separate workloads      â”‚
â”‚                                                                  â”‚
â”‚ âœ“ blade005 as K3s master on separate link                       â”‚
â”‚   Why: Survives PoE switch failure, dedicated bandwidth         â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Different pod CIDRs per cluster                               â”‚
â”‚   Why: Avoid IP conflicts if clusters ever need to communicate  â”‚
â”‚                                                                  â”‚
â”‚ âœ“ No bastion host (WireGuard instead)                           â”‚
â”‚   Why: VPN provides same function, saves resources              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Resource Allocation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ORACLE CLOUD FREE TIER UTILIZATION                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ Total Available: 4 ARM OCPU, 24GB RAM, 200GB storage            â”‚
â”‚                                                                  â”‚
â”‚ Allocation:                                                      â”‚
â”‚   K3s Master:  1.0 OCPU,  6GB RAM,  50GB storage                â”‚
â”‚   Worker 1:    1.5 OCPU,  9GB RAM,  75GB storage                â”‚
â”‚   Worker 2:    1.5 OCPU,  9GB RAM,  75GB storage                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚   Total:       4.0 OCPU, 24GB RAM, 200GB storage âœ…              â”‚
â”‚                                                                  â”‚
â”‚ Workload Distribution:                                           â”‚
â”‚   Master: K3s control plane, etcd, WireGuard, CoreDNS           â”‚
â”‚   Workers: Application pods, monitoring, logging                 â”‚
â”‚                                                                  â”‚
â”‚ Resource Requests (Reserved):                                    â”‚
â”‚   K3s system: ~0.5 OCPU, ~2GB RAM                               â”‚
â”‚   ArgoCD: N/A (runs on homelab)                                 â”‚
â”‚   Monitoring: ~0.3 OCPU, ~1GB RAM (if deployed)                 â”‚
â”‚   Available for apps: ~3 OCPU, ~20GB RAM                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HOMELAB RESOURCE UTILIZATION                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ Compute Blade Cluster: 5 nodes                                   â”‚
â”‚   Each: CM5 (4-core @ 2.4GHz, 4-8GB RAM, NVMe SSD)             â”‚
â”‚                                                                  â”‚
â”‚ Allocation:                                                      â”‚
â”‚   blade005 (Master): 1 node, dedicated link                      â”‚
â”‚   blade001-004 (Workers): 4 nodes, shared PoE switch            â”‚
â”‚                                                                  â”‚
â”‚ Total: 20 cores, 20-40GB RAM, 5x NVMe SSDs                      â”‚
â”‚                                                                  â”‚
â”‚ Power: 28-40W total (4-8W per blade)                            â”‚
â”‚        Well within 60W PoE budget                                â”‚
â”‚                                                                  â”‚
â”‚ Services Running:                                                â”‚
â”‚   â€¢ K3s cluster (homelab/staging workloads)                     â”‚
â”‚   â€¢ ArgoCD (manages both clusters)                              â”‚
â”‚   â€¢ Gitea (GitOps source of truth)                              â”‚
â”‚   â€¢ PostgreSQL (for ArgoCD, Gitea)                              â”‚
â”‚   â€¢ Node.js applications                                         â”‚
â”‚   â€¢ Prometheus/Grafana/Loki (monitoring)                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DNS ZONE OWNERSHIP                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ PUBLIC ZONES (ğŸŒ Internet)                                      â”‚
â”‚   zengarden.space                                               â”‚
â”‚     Authoritative: Cloudflare                                   â”‚
â”‚     Writer:        external-dns (Oracle K3s)                    â”‚
â”‚     Ingress:       203.0.113.10:443 (Oracle public IP)         â”‚
â”‚     Purpose:       Production apps (retroboard.zengarden.space) â”‚
â”‚                                                                 â”‚
â”‚   homelab.zengarden.space                                       â”‚
â”‚     Authoritative: Cloudflare                                   â”‚
â”‚     Writer:        cloudflared Tunnel (Homelab)                 â”‚
â”‚     Ingress:       192.168.88.201 via Tunnel                    â”‚
â”‚     Purpose:       Selected public homelab apps (gitea)         â”‚
â”‚                                                                 â”‚
â”‚ INTERNAL ZONES (ğŸ”’ LAN/VPN Only)                                â”‚
â”‚   homelab.int.zengarden.space                                   â”‚
â”‚     Authoritative: MikroTik DNS (192.168.88.1)                  â”‚
â”‚     Writer:        external-dns (Homelab K3s)                   â”‚
â”‚     Ingress:       192.168.88.200 (MetalLB internal)           â”‚
â”‚     Purpose:       Internal homelab services (argocd, grafana)  â”‚
â”‚                                                                 â”‚
â”‚   prod.int.zengarden.space                                      â”‚
â”‚     Authoritative: CoreDNS (Oracle master 10.0.1.10)            â”‚
â”‚     Writer:        external-dns (Oracle K3s)                    â”‚
â”‚     Ingress:       10.0.2.x (Oracle private subnet)            â”‚
â”‚     Purpose:       Internal Oracle services (api)               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DNS RESOLUTION FLOW                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CLOUDFLARE DNS    â”‚
                    â”‚   (Public Zones)    â”‚
                    â”‚                     â”‚
                    â”‚ â€¢ zengarden.space   â”‚
                    â”‚ â€¢ homelab           â”‚
                    â”‚   .zengarden.space  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Internet Users  â”‚ â”‚ VPN Users  â”‚  â”‚ LAN Users  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                â”‚
                              â”‚                â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    INTERNAL DNS HIERARCHY        â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚            â”‚            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Oracle DNS Hubâ”‚  â”‚ MikroTik DNS      â”‚
        â”‚ 10.99.0.1     â”‚  â”‚ 192.168.88.1      â”‚
        â”‚               â”‚  â”‚                   â”‚
        â”‚ Forwards:     â”‚  â”‚ Authoritative:    â”‚
        â”‚ homelab.int â”€â”€â”¼â”€â”€â”¤ homelab.int       â”‚
        â”‚ prod.int      â”‚  â”‚                   â”‚
        â”‚ others        â”‚  â”‚ Forwards:         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ prod.int â†’ VPN    â”‚
                â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Oracle K3s       â”‚
       â”‚ CoreDNS          â”‚
       â”‚ 10.0.1.10        â”‚
       â”‚                  â”‚
       â”‚ Authoritative:   â”‚
       â”‚ prod.int         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESOLUTION EXAMPLES                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ ğŸŒ Internet User                                                â”‚
â”‚   retroboard.zengarden.space                                    â”‚
â”‚   â†’ Cloudflare â†’ 203.0.113.10 â†’ Oracle ingress                 â”‚
â”‚                                                                 â”‚
â”‚   gitea.homelab.zengarden.space                                 â”‚
â”‚   â†’ Cloudflare â†’ Tunnel â†’ 192.168.88.201 â†’ Homelab ingress     â”‚
â”‚                                                                 â”‚
â”‚ ğŸ  LAN User                                                     â”‚
â”‚   argocd.homelab.int.zengarden.space                            â”‚
â”‚   â†’ MikroTik â†’ 192.168.88.200 â†’ Homelab ingress                â”‚
â”‚                                                                 â”‚
â”‚   api.prod.int.zengarden.space                                  â”‚
â”‚   â†’ MikroTik â†’ VPN â†’ Oracle CoreDNS â†’ 10.0.2.x                 â”‚
â”‚   âš ï¸  Cannot reach (not on VPN)                                 â”‚
â”‚                                                                 â”‚
â”‚ ğŸ’» VPN Developer                                                â”‚
â”‚   argocd.homelab.int.zengarden.space                            â”‚
â”‚   â†’ Oracle hub â†’ MikroTik â†’ 192.168.88.200 â†’ via VPN           â”‚
â”‚                                                                 â”‚
â”‚   api.prod.int.zengarden.space                                  â”‚
â”‚   â†’ Oracle hub â†’ Oracle CoreDNS â†’ 10.0.2.x â†’ via VPN           â”‚
â”‚                                                                 â”‚
â”‚   retroboard.zengarden.space                                    â”‚
â”‚   â†’ Oracle hub â†’ Cloudflare â†’ 203.0.113.10 â†’ public internet   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXTERNAL-DNS WRITERS                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Location           Provider    Domain Filter        Target DNS  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Oracle K3s         cloudflare  zengarden.space      Cloudflare  â”‚
â”‚ Oracle K3s         rfc2136     prod.int.zen...      10.0.1.10   â”‚
â”‚ Homelab K3s        rfc2136     homelab.int.zen...   MikroTik    â”‚
â”‚ Homelab cloudflared tunnel     homelab.zen...       Cloudflare  â”‚
â”‚                                                                 â”‚
â”‚ Key Rule: ONE writer per zone (no conflicts)                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INGRESS CLASSES & IPS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Environment     Class      IP               Access     DNS Zone â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Homelab K3s     internal   192.168.88.200   LAN/VPN    .int     â”‚
â”‚ Homelab K3s     external   192.168.88.201   Tunnel     homelab  â”‚
â”‚ Oracle K3s      internal   10.0.2.x         VPN only   .int     â”‚
â”‚ Oracle K3s      external   203.0.113.10     Internet   apex     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CERTIFICATES (Let's Encrypt DNS-01)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Zone                      Issuer              Token Scope       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ zengarden.space           letsencrypt-prod    Cloudflare (edit) â”‚
â”‚ homelab.zengarden.space   letsencrypt-prod    Cloudflare (edit) â”‚
â”‚ *.int.zengarden.space     letsencrypt-dns01   Cloudflare (edit) â”‚
â”‚                                                                 â”‚
â”‚ All certs use DNS-01 challenge (no HTTP-01 exposure)            â”‚
â”‚ Separate Cloudflare tokens per cluster (least privilege)        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAMING CONVENTIONS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Environment          Example FQDN                     Access    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Production Public    retroboard.zengarden.space       Internet  â”‚
â”‚ Homelab Public       gitea.homelab.zengarden.space    Internet  â”‚
â”‚ Homelab Internal     argocd.homelab.int.zen...        LAN/VPN   â”‚
â”‚ Production Internal  api.prod.int.zengarden.space     VPN only  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECURITY RULES                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ âŒ No wildcard *.zengarden.space at apex (prevents exposure)    â”‚
â”‚ âœ… One writer per zone (prevents TXT conflicts)                 â”‚
â”‚ ğŸ”’ .int zones only on LAN/VPN (not public)                      â”‚
â”‚ ğŸŒ Public names via Cloudflare CDN or Tunnel                    â”‚
â”‚ ğŸ”‘ Separate API tokens per cluster                              â”‚
â”‚ ğŸ§± Public ingress: 80/443 only (iptables/NSG)                   â”‚
â”‚ ğŸ§¾ DNS-01 for all certs (no HTTP-01 exposure)                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KEY DESIGN DECISIONS                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ âœ“ Split-horizon DNS (.int for internal, apex for public)       â”‚
â”‚ âœ“ Oracle DNS hub (10.99.0.1) for VPN users                     â”‚
â”‚ âœ“ MikroTik DNS for LAN conditional forwarding                  â”‚
â”‚ âœ“ Cloudflare Tunnel for selective homelab exposure             â”‚
â”‚ âœ“ No wildcard DNS (explicit entries only)                      â”‚
â”‚ âœ“ external-dns automates record management                     â”‚
â”‚ âœ“ cert-manager + DNS-01 for all HTTPS                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜