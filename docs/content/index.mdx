import Image from 'next/image'

# Homelab

## Production-Grade Kubernetes at Home

Welcome to the technical documentation for a modern homelab platform that demonstrates enterprise-grade platform engineering practices on minimal hardware. This environment showcases how to build, secure, and operate a resilient Kubernetes cluster optimized for 24/7 operation with minimal energy consumption.

## Platform Overview

This homelab is a **production-ready, security-hardened Kubernetes platform** running on ARM hardware with:

- **5-node distributed cluster** (Raspberry Pi Compute Module 5)
- **28-40W total power consumption** - always-on with minimal environmental impact
- **GitOps-driven automation** - zero manual configuration steps
- **Enterprise security** - OIDC authentication, network segmentation, hardened containers
- **Complete observability** - metrics, logging, and alerting

## Design Principles

This platform embodies key platform engineering principles:

1. **Infrastructure as Code** - Every component from bare metal to applications is declaratively defined
2. **GitOps-First** - All changes flow through Git with automated validation and deployment
3. **Security by Default** - Hardened configurations, least privilege, defense in depth
4. **Deterministic Operations** - Reproducible deployments with zero manual configuration
5. **Complete Observability** - Comprehensive metrics, logs, audit trails, and alerts
6. **Modular Architecture** - Loosely coupled components with clear boundaries
7. **Energy Efficiency** - Optimized for 24/7 operation with minimal power consumption


## Architecture at a Glance

<Image src="/images/homelab-arch.svg" alt="Homelab Overview" width={1200} height={600} />

## Use Cases

This homelab serves multiple purposes:

- **Learning Platform** - Hands-on experience with enterprise platform engineering
- **Development Environment** - Always-available infrastructure for pet projects
- **CI/CD Pipeline** - Automated testing and deployment for personal projects
- **Data Analytics** - PostgreSQL databases with Metabase visualization
- **Experimentation** - Safe environment to test new technologies
- **Portfolio Showcase** - Demonstrate platform engineering expertise

## Repository Structure

```
homelab/
├── ansible/                       # Day 1: Infrastructure bootstrap
│   ├── install-k3s/               # K3s cluster installation + hardening
│   ├── install-restrictive-proxy/ # MikroTik API proxy with path restrictions
│   ├── partition-nvme-drives/     # NVMe partitioning for local-path
│   └── setup-ssh-keys/            # SSH key distribution
├── helmfile/                      # Day 1: Platform deployment
│   ├── helmfile.yaml              # Root orchestration
│   ├── metallb-system/            # Load balancer IP ranges
│   ├── cert-manager/              # TLS certificate management
│   ├── external-dns/              # DNS automation (MikroTik + Cloudflare)
│   ├── external-tunnel/           # Cloudflare Tunnel + external ingress
│   ├── ingress-nginx/             # Internal ingress controller
│   ├── secrets-system/            # External Secrets + DerivedSecrets operator
│   ├── argocd/                    # GitOps controller + config
│   ├── gitea/                     # Git server + automation + runner
│   ├── cnpg-system/               # CloudNativePG operator
│   ├── metabase/                  # Analytics + CNPG auto-discovery operator
│   └── victoria-metrics/          # Monitoring stack + alerting
├── integrations.yaml.template     # External service credentials
└── docs/                          # This documentation site
```

## Getting Started

Ready to explore or deploy this platform?

1. **Understand the Design** - Start with [Introduction](/introduction) to understand the design decisions and architecture
2. **Plan Your Infrastructure** - Review [Infrastructure Planning](/introduction/infrastructure-planning) for hardware requirements
3. **Deploy** - Follow the [Deployment Guide](/deployment) step-by-step
4. **Operate** - Learn maintenance and monitoring in [Operations](/operations)

## Community & Collaboration

This homelab is designed to be:

- **Educational** - Learn modern platform engineering practices
- **Reproducible** - Fork and adapt for your own infrastructure
- **Open** - All code available at [GitHub/zengarden-space/homelab](https://github.com/zengarden-space/homelab)

For collaboration:
- **VPN Access**: Available for approved contributors
- **Internal Git**: [gitea.homelab.int.zengarden.space](https://gitea.homelab.int.zengarden.space/zengarden-space/)
- **Internal ArgoCD**: [argocd.homelab.int.zengarden.space](https://argocd.homelab.int.zengarden.space/)

---

*This documentation showcases production-grade platform engineering principles applied to a cost-effective, energy-efficient homelab environment. Built by Oleksii Pylypenko as a learning platform.*